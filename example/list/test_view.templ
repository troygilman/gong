package main

import (
	"github.com/troygilman/gong"
	"github.com/troygilman/gong/hook"
	"log"
)

type testView struct {
	UserComponent gong.Component
	db            *userDatabase
}

templ (view testView) Action() {
	{{
	log.Println("TEST", hook.Request(ctx).PathValue("name"))
	}}
}

templ (view testView) View() {
	{{
	name := hook.Request(ctx).PathValue("name")
	user, ok := view.db.Read(name)
	}}
	if ok {
		@view.UserComponent.WithLoaderData(user)
	}
}
